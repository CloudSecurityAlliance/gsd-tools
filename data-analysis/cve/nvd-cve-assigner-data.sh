#!/bin/bash

# Quick and dirty way to generate a csv of data

wget -q -i nvd-json-urls.txt
gzip -d nvdcve-1.1-20*.gz

echo "count,year,assigner" 

grep ASSIGNER nvdcve-1.1-20* | sort | uniq -c | sed 's/ nvdcve-1.1-/,/' | sed 's/\.json:\s*"ASSIGNER" : "/,/' | sed 's/^\s*//' | sed 's/"//'

# TODO: convert this to python
# TODO: output data in table format for easier excel parsing
# TODO: generate some reports:
# CNAs no longer active by year (e.g. last year active), yearly average before that
# CNAs in decline, e.g. what year did they peak, what was the average, what was the last year
# CNAs in growth, e.g. what year did they peak, what was the average, what was the last year
# Reminder: ignore 2022 data for now (to early)
